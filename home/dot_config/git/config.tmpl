# =======================================================
# 1. Identity & Security
# =======================================================
[user]
    name = kinnrai
    email = me@kinnrai.com
    signingkey = 2EC098E5B0469757

[gpg]
{{- if eq .chezmoi.os "windows" }}
    program = "C:\\Program Files (x86)\\GnuPG\\bin\\gpg.exe"
{{- else if eq .chezmoi.os "darwin" }}
    program = /opt/homebrew/bin/gpg
{{- else }}
    program = /usr/bin/gpg
{{- end }}

[commit]
    gpgsign = true
    verbose = true

[credential]
{{- if eq .chezmoi.os "darwin" }}
    helper = osxkeychain
{{- else if lookPath "git-credential-manager" }}
    helper = manager
{{- else }}
    helper = cache --timeout=3600
{{- end }}

# =======================================================
# 2. Performance & System
# =======================================================
[core]
    fsmonitor = true
    untrackedCache = true

{{- if eq .chezmoi.os "windows" }}
    autocrlf = true
{{- else }}
    autocrlf = input
{{- end }}

{{- if eq .chezmoi.os "windows" }}
    filemode = false
{{- else }}
    filemode = true
{{- end }}

{{- if eq .chezmoi.os "darwin" }}
    precomposeunicode = true
{{- end }}

[maintenance]
    auto = true
    strategy = incremental

[pack]
    threads = 0

[grep]
    threads = 0

[fetch]
    parallel = 0
    writeCommitGraph = true

# =======================================================
# 3. UI & Visualization
# =======================================================
[column]
    ui = auto

{{ if lookPath "delta" -}}
[core]
    pager = delta

[interactive]
    diffFilter = delta --color-only

[delta]
    line-numbers = true
    side-by-side = true
    hyperlinks = true
    navigate = true
{{- end }}

# =======================================================
# 4. Diff & Merge Logic
# =======================================================
[diff]
    algorithm = histogram
    colorMoved = plain
    mnemonicPrefix = true
    renames = true

[merge]
    conflictstyle = zdiff3

[rerere]
    enabled = true
    autoupdate = true

[pull]
    rebase = true

[rebase]
    autoStash = true
    autoSquash = true
    updateRefs = true

# =======================================================
# 5. Repository Management
# =======================================================
[init]
    defaultBranch = master

[branch]
    sort = -committerdate

[tag]
    sort = version:refname

[fetch]
    prune = true
    pruneTags = true

[push]
    default = simple
    autoSetupRemote = true
    followTags = true

# =======================================================
# 6. Aliases
# =======================================================
[alias]
    last = log -1 HEAD --stat
    logg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
    rank = shortlog -sn --no-merges

    undo = reset HEAD~1 --mixed
    unstage = reset HEAD --

    ignore = update-index --skip-worktree
    unignore = update-index --no-skip-worktree
    ignored = !git ls-files -v | grep "^S"
